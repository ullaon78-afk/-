<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìŒí–¥ ì‹œì„¤ ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;600&display=swap');

  :root {
    --bg: #0d1117;
    --surface: #161b22;
    --surface2: #1c2333;
    --border: #30363d;
    --accent: #58a6ff;
    --accent2: #3fb950;
    --warn: #f0883e;
    --danger: #f85149;
    --text: #e6edf3;
    --text2: #8b949e;
    --text3: #6e7681;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Noto Sans KR', sans-serif;
    min-height: 100vh;
    padding: 24px 16px 80px;
  }

  .header {
    max-width: 720px;
    margin: 0 auto 32px;
    border-bottom: 1px solid var(--border);
    padding-bottom: 24px;
  }

  .header-top {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
  }

  .badge {
    background: var(--accent);
    color: #0d1117;
    font-size: 10px;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 20px;
    letter-spacing: 1px;
    font-family: 'JetBrains Mono', monospace;
  }

  .header h1 {
    font-size: 22px;
    font-weight: 700;
    letter-spacing: -0.5px;
  }

  .meta-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-top: 16px;
  }

  .meta-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .meta-field label {
    font-size: 11px;
    color: var(--text3);
    font-weight: 500;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  .meta-field input, .meta-field select {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text);
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 13px;
    padding: 8px 10px;
    outline: none;
    transition: border-color 0.2s;
  }

  .meta-field input:focus, .meta-field select:focus {
    border-color: var(--accent);
  }

  .progress-bar-wrap {
    max-width: 720px;
    margin: 0 auto 24px;
  }

  .progress-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }

  .progress-label {
    font-size: 12px;
    color: var(--text2);
  }

  .progress-pct {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    font-weight: 600;
    color: var(--accent);
  }

  .progress-track {
    height: 4px;
    background: var(--surface2);
    border-radius: 4px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius: 4px;
    transition: width 0.4s ease;
    width: 0%;
  }

  .section {
    max-width: 720px;
    margin: 0 auto 20px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 18px;
    background: var(--surface2);
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    user-select: none;
  }

  .section-icon {
    font-size: 16px;
    width: 28px;
    text-align: center;
  }

  .section-title {
    font-size: 13px;
    font-weight: 700;
    flex: 1;
    letter-spacing: 0.2px;
  }

  .section-count {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text3);
  }

  .section-body {
    padding: 6px 0;
  }

  .item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 18px;
    border-bottom: 1px solid var(--border);
    transition: background 0.15s;
  }

  .item:last-child { border-bottom: none; }
  .item:hover { background: rgba(88,166,255,0.04); }

  .item-check-wrap {
    display: flex;
    gap: 6px;
    flex-shrink: 0;
    padding-top: 1px;
  }

  .radio-btn {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    border: 1.5px solid var(--border);
    background: transparent;
    cursor: pointer;
    font-size: 13px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
    color: var(--text3);
  }

  .radio-btn:hover { border-color: var(--text2); }

  .radio-btn.ok.active {
    background: rgba(63,185,80,0.15);
    border-color: var(--accent2);
    color: var(--accent2);
  }

  .radio-btn.warn.active {
    background: rgba(240,136,62,0.15);
    border-color: var(--warn);
    color: var(--warn);
  }

  .radio-btn.fail.active {
    background: rgba(248,81,73,0.15);
    border-color: var(--danger);
    color: var(--danger);
  }

  .item-content { flex: 1; min-width: 0; }

  .item-name {
    font-size: 13px;
    font-weight: 500;
    margin-bottom: 3px;
    line-height: 1.5;
  }

  .item-desc {
    font-size: 11px;
    color: var(--text3);
    line-height: 1.5;
  }

  .item-note {
    width: 100%;
    margin-top: 8px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 5px;
    color: var(--text2);
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 11px;
    padding: 6px 9px;
    resize: none;
    outline: none;
    display: none;
    transition: border-color 0.2s;
  }

  .item-note.visible { display: block; }
  .item-note:focus { border-color: var(--warn); color: var(--text); }

  .legend {
    max-width: 720px;
    margin: 0 auto 20px;
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--text2);
  }

  .legend-dot {
    width: 8px; height: 8px;
    border-radius: 2px;
  }

  .submit-wrap {
    max-width: 720px;
    margin: 32px auto 0;
  }

  .submit-btn {
    width: 100%;
    padding: 14px;
    background: var(--accent);
    color: #0d1117;
    border: none;
    border-radius: 8px;
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: opacity 0.2s, transform 0.1s;
    letter-spacing: 0.3px;
  }

  .submit-btn:hover { opacity: 0.88; }
  .submit-btn:active { transform: scale(0.99); }

  .result-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.75);
    z-index: 100;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .result-modal.show { display: flex; }

  .result-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 28px 24px;
    max-width: 480px;
    width: 100%;
    max-height: 80vh;
    overflow-y: auto;
  }

  .result-title {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .result-summary {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 20px;
  }

  .stat-box {
    background: var(--surface2);
    border-radius: 8px;
    padding: 12px;
    text-align: center;
  }

  .stat-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 4px;
  }

  .stat-label { font-size: 11px; color: var(--text3); }

  .issues-list { margin-bottom: 20px; }
  .issues-title { font-size: 12px; color: var(--text2); font-weight: 600; margin-bottom: 10px; letter-spacing: 0.5px; }

  .issue-item {
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 12px;
    margin-bottom: 6px;
    border-left: 3px solid;
  }

  .issue-item.warn { background: rgba(240,136,62,0.1); border-color: var(--warn); color: #f0883e; }
  .issue-item.fail { background: rgba(248,81,73,0.1); border-color: var(--danger); color: #f85149; }

  .result-actions { display: flex; gap: 10px; }

  .btn-secondary {
    flex: 1;
    padding: 10px;
    background: var(--surface2);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 6px;
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 13px;
    cursor: pointer;
    transition: background 0.15s;
  }

  .btn-secondary:hover { background: var(--border); }

  .btn-primary {
    flex: 1;
    padding: 10px;
    background: var(--accent2);
    color: #0d1117;
    border: none;
    border-radius: 6px;
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    transition: opacity 0.15s;
  }

  .btn-primary:hover { opacity: 0.85; }

  @media (max-width: 480px) {
    .meta-row { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="header">
  <div class="header-top">
    <span class="badge">AUDIO DEPT</span>
    <span style="color:var(--text3); font-size:12px; font-family:'JetBrains Mono',monospace;" id="dateDisplay"></span>
  </div>
  <h1>ìŒí–¥ ì‹œì„¤ ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸</h1>
  <div class="meta-row">
    <div class="meta-field">
      <label>ì ê²€ ìœ í˜•</label>
      <select id="checkType">
        <option value="ìˆ˜ì‹œ">ìˆ˜ì‹œ ì ê²€</option>
        <option value="ì£¼ê°„">ì£¼ê°„ ì ê²€</option>
        <option value="ì›”ê°„">ì›”ê°„ ì ê²€</option>
      </select>
    </div>
    <div class="meta-field">
      <label>ì ê²€ì</label>
      <input type="text" id="inspector" placeholder="ì´ë¦„ ì…ë ¥">
    </div>
    <div class="meta-field">
      <label>ê³µì—°/í–‰ì‚¬ëª… (ì„ íƒ)</label>
      <input type="text" id="eventName" placeholder="í•´ë‹¹ ì‹œ ì…ë ¥">
    </div>
    <div class="meta-field">
      <label>ì ê²€ ê³µê°„</label>
      <select id="location">
        <option>ë©”ì¸ í™€</option>
        <option>ì†Œê·¹ì¥</option>
        <option>ì—°ìŠµì‹¤</option>
        <option>ë¬´ëŒ€ ì „ì²´</option>
      </select>
    </div>
  </div>
</div>

<div class="legend">
  <div class="legend-item"><div class="legend-dot" style="background:var(--accent2)"></div> ì •ìƒ</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--warn)"></div> ì£¼ì˜ (ë©”ëª¨ í•„ìˆ˜)</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--danger)"></div> ë¶ˆëŸ‰ (ì¦‰ì‹œ ì¡°ì¹˜)</div>
</div>

<div class="progress-bar-wrap">
  <div class="progress-info">
    <span class="progress-label">ì ê²€ ì§„í–‰ë¥ </span>
    <span class="progress-pct" id="pctText">0%</span>
  </div>
  <div class="progress-track"><div class="progress-fill" id="progressFill"></div></div>
</div>

<div id="sections"></div>

<div class="submit-wrap">
  <button class="submit-btn" onclick="submitCheck()">âœ“ ì ê²€ ì™„ë£Œ ë° ê²°ê³¼ í™•ì¸</button>
</div>

<div class="result-modal" id="resultModal">
  <div class="result-box">
    <div class="result-title">ğŸ“‹ ì ê²€ ê²°ê³¼ ìš”ì•½</div>
    <div class="result-summary" id="resultSummary"></div>
    <div class="issues-list" id="issuesList"></div>
    <div class="result-actions">
      <button class="btn-secondary" onclick="closeModal()">ë‹«ê¸°</button>
      <button class="btn-primary" onclick="copyResult()">ê²°ê³¼ ë³µì‚¬</button>
    </div>
  </div>
</div>

<script>
const checkData = [
  {
    id: "main_system",
    icon: "ğŸ”Š",
    title: "ë©”ì¸ ìŒí–¥ ì‹œìŠ¤í…œ",
    items: [
      { id: "main_amp", name: "ë©”ì¸ ì•°í”„ ë™ì‘ ìƒíƒœ", desc: "ì „ì› ì¸ê°€ í›„ ì¶œë ¥ ë ˆë²¨ ë° ì´ìƒìŒ í™•ì¸" },
      { id: "main_speaker", name: "ë©”ì¸ ìŠ¤í”¼ì»¤ ì •ìƒ ì¶œë ¥", desc: "ì¢ŒÂ·ìš° ì±„ë„ ê· í˜• ë° ìŒì§ˆ í™•ì¸" },
      { id: "sub_speaker", name: "ì„œë¸Œìš°í¼ ë™ì‘ í™•ì¸", desc: "ì €ìŒ ì¬ìƒ ë° ìœ„ìƒ í™•ì¸" },
      { id: "monitor", name: "ë¬´ëŒ€ ëª¨ë‹ˆí„° ìŠ¤í”¼ì»¤", desc: "ì „ ì±„ë„ ì¶œë ¥ ë° í”¼ë“œë°± ì—¬ë¶€ í™•ì¸" },
    ]
  },
  {
    id: "console",
    icon: "ğŸ›ï¸",
    title: "ì½˜ì†” ë° ì‹ í˜¸ ì²˜ë¦¬",
    items: [
      { id: "console_main", name: "ë©”ì¸ ë¯¹ì‹± ì½˜ì†”", desc: "í˜ì´ë”, EQ, ë²„ìŠ¤ ì±„ë„ ë™ì‘ í™•ì¸" },
      { id: "console_monitor", name: "ëª¨ë‹ˆí„° ì½˜ì†” (ë³„ë„ ìš´ìš© ì‹œ)", desc: "ëª¨ë‹ˆí„° ë¯¹ìŠ¤ ì±„ë„ ë™ì‘ í™•ì¸" },
      { id: "eq", name: "ê·¸ë˜í”½ EQ / í”„ë¡œì„¸ì„œ", desc: "ì„¤ì •ê°’ ìœ ì§€ ë° ë°”ì´íŒ¨ìŠ¤ ê¸°ëŠ¥ í™•ì¸" },
      { id: "signal_flow", name: "ì‹ í˜¸ íë¦„ ì „ì²´ ì²´í¬", desc: "ì†ŒìŠ¤ â†’ ì½˜ì†” â†’ ì•°í”„ â†’ ìŠ¤í”¼ì»¤ ê²½ë¡œ í™•ì¸" },
    ]
  },
  {
    id: "mic",
    icon: "ğŸ¤",
    title: "ë§ˆì´í¬ ë° ë¬´ì„  ì‹œìŠ¤í…œ",
    items: [
      { id: "wireless_tx", name: "ë¬´ì„  ì†¡ì‹ ê¸° (ë°”ë””íŒ©/í•¸ë“œí—¬ë“œ)", desc: "ë°°í„°ë¦¬ ì”ëŸ‰ ë° RF ì‹ í˜¸ ì„¸ê¸° í™•ì¸" },
      { id: "wireless_rx", name: "ë¬´ì„  ìˆ˜ì‹ ê¸° ì•ˆí…Œë‚˜", desc: "ì•ˆí…Œë‚˜ ìœ„ì¹˜ ë° ìˆ˜ì‹  ë ˆë²¨ í™•ì¸" },
      { id: "wired_mic", name: "ìœ ì„  ë§ˆì´í¬ ë° ìŠ¤íƒ ë“œ", desc: "ìŒì§ˆÂ·ì¡ìŒÂ·ì»¤ë„¥í„° ì ‘ì´‰ í™•ì¸" },
      { id: "mic_cable", name: "ë§ˆì´í¬ ì¼€ì´ë¸” ìƒíƒœ", desc: "ë‹¨ì„ , í”¼ë³µ ì†ìƒ, ì»¤ë„¥í„° ë§ˆëª¨ í™•ì¸" },
    ]
  },
  {
    id: "playback",
    icon: "ğŸ’¿",
    title: "ì¬ìƒ ë° ì˜ìƒ ìŒí–¥",
    items: [
      { id: "cd_player", name: "CD/ë¯¸ë””ì–´ í”Œë ˆì´ì–´", desc: "ì¬ìƒ, ì •ì§€, í ê¸°ëŠ¥ í™•ì¸" },
      { id: "computer_audio", name: "ì»´í“¨í„° ì˜¤ë””ì˜¤ ì¸í„°í˜ì´ìŠ¤", desc: "ë“œë¼ì´ë²„ ìƒíƒœ ë° ë ˆì´í„´ì‹œ í™•ì¸" },
      { id: "av_sync", name: "ì˜ìƒ-ìŒí–¥ ì‹±í¬", desc: "ì˜ìƒ ì‹œìŠ¤í…œ ì—°ë™ ì‹œ ë”œë ˆì´ í™•ì¸" },
    ]
  },
  {
    id: "power_cable",
    icon: "âš¡",
    title: "ì „ì› ë° ë°°ì„ ",
    items: [
      { id: "power_strip", name: "ìŒí–¥ìš© ì „ì› ë¶„ì „ë°˜", desc: "ì°¨ë‹¨ê¸° ìƒíƒœ ë° ì ‘ì§€ í™•ì¸" },
      { id: "power_cable_main", name: "ì£¼ìš” ì „ì› ì¼€ì´ë¸”", desc: "ê³¼ì—´, í”¼ë³µ ì†ìƒ, ì ‘ì† ìƒíƒœ í™•ì¸" },
      { id: "snake_cable", name: "ìŠ¤í…Œì´ì§€ ë°•ìŠ¤/ìŠ¤ë„¤ì´í¬ ì¼€ì´ë¸”", desc: "ì»¤ë„¥í„° ë° ì±„ë„ ë§¤í•‘ í™•ì¸" },
      { id: "grounding", name: "ì ‘ì§€ ë° ë…¸ì´ì¦ˆ ì°¨í", desc: "í—˜ ë…¸ì´ì¦ˆ ìœ ë¬´ í™•ì¸" },
    ]
  },
  {
    id: "safety",
    icon: "ğŸ›¡ï¸",
    title: "ì•ˆì „ í•­ëª©",
    items: [
      { id: "speaker_rigging", name: "í”Œë¼ì´ë“œ ìŠ¤í”¼ì»¤ ë¦¬ê¹… ìƒíƒœ", desc: "ë³¼íŠ¸, í´ë¨í”„, ì•ˆì „ ì™€ì´ì–´ ìœ¡ì•ˆ í™•ì¸" },
      { id: "cable_floor", name: "ë°”ë‹¥ ì¼€ì´ë¸” ì •ë¦¬ ìƒíƒœ", desc: "ì´ë™ ë™ì„  ì¼€ì´ë¸” ì»¤ë²„ ì²˜ë¦¬ í™•ì¸" },
      { id: "emergency", name: "ë¹„ìƒ ë°©ì†¡ ì‹œìŠ¤í…œ ì—°ë™", desc: "ë¹„ìƒ ìš°ì„ ê¶Œ ì‘ë™ ì—¬ë¶€ í™•ì¸" },
      { id: "fire", name: "ìŒí–¥ì‹¤ ë‚´ ì†Œí™”ê¸° ìœ„ì¹˜", desc: "ìœ íš¨ê¸°ê°„ ë° ì ‘ê·¼ì„± í™•ì¸" },
    ]
  }
];

// Render sections
const container = document.getElementById('sections');
const states = {}; // {itemId: 'ok'|'warn'|'fail'|null}
const notes = {};

checkData.forEach(section => {
  const sec = document.createElement('div');
  sec.className = 'section';
  sec.innerHTML = `
    <div class="section-header">
      <span class="section-icon">${section.icon}</span>
      <span class="section-title">${section.title}</span>
      <span class="section-count" id="count-${section.id}">0/${section.items.length}</span>
    </div>
    <div class="section-body" id="body-${section.id}"></div>
  `;
  container.appendChild(sec);

  const body = sec.querySelector(`#body-${section.id}`);
  section.items.forEach(item => {
    states[item.id] = null;
    notes[item.id] = '';

    const row = document.createElement('div');
    row.className = 'item';
    row.innerHTML = `
      <div class="item-check-wrap">
        <button class="radio-btn ok" data-id="${item.id}" data-val="ok" title="ì •ìƒ">âœ“</button>
        <button class="radio-btn warn" data-id="${item.id}" data-val="warn" title="ì£¼ì˜">â–³</button>
        <button class="radio-btn fail" data-id="${item.id}" data-val="fail" title="ë¶ˆëŸ‰">âœ•</button>
      </div>
      <div class="item-content">
        <div class="item-name">${item.name}</div>
        <div class="item-desc">${item.desc}</div>
        <textarea class="item-note" id="note-${item.id}" rows="2" placeholder="ì´ìƒ ë‚´ìš© ë©”ëª¨..."></textarea>
      </div>
    `;
    body.appendChild(row);

    row.querySelectorAll('.radio-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const id = btn.dataset.id;
        const val = btn.dataset.val;
        const prev = states[id];

        // Toggle off if same
        if (prev === val) {
          states[id] = null;
          row.querySelectorAll('.radio-btn').forEach(b => b.classList.remove('active'));
        } else {
          states[id] = val;
          row.querySelectorAll('.radio-btn').forEach(b => {
            b.classList.toggle('active', b.dataset.val === val);
          });
        }

        // Show note for warn/fail
        const noteEl = document.getElementById(`note-${id}`);
        if (states[id] === 'warn' || states[id] === 'fail') {
          noteEl.classList.add('visible');
        } else {
          noteEl.classList.remove('visible');
        }

        updateProgress();
        updateSectionCount(section.id, section.items);
      });
    });

    document.getElementById(`note-${item.id}`).addEventListener('input', e => {
      notes[item.id] = e.target.value;
    });
  });
});

function updateSectionCount(sectionId, items) {
  const done = items.filter(i => states[i.id] !== null).length;
  document.getElementById(`count-${sectionId}`).textContent = `${done}/${items.length}`;
}

function updateProgress() {
  const total = Object.keys(states).length;
  const done = Object.values(states).filter(v => v !== null).length;
  const pct = Math.round((done / total) * 100);
  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('pctText').textContent = pct + '%';
}

function submitCheck() {
  const total = Object.keys(states).length;
  const done = Object.values(states).filter(v => v !== null).length;
  const okCount = Object.values(states).filter(v => v === 'ok').length;
  const warnCount = Object.values(states).filter(v => v === 'warn').length;
  const failCount = Object.values(states).filter(v => v === 'fail').length;

  // Summary stats
  document.getElementById('resultSummary').innerHTML = `
    <div class="stat-box">
      <div class="stat-num" style="color:var(--accent2)">${okCount}</div>
      <div class="stat-label">ì •ìƒ</div>
    </div>
    <div class="stat-box">
      <div class="stat-num" style="color:var(--warn)">${warnCount}</div>
      <div class="stat-label">ì£¼ì˜</div>
    </div>
    <div class="stat-box">
      <div class="stat-num" style="color:var(--danger)">${failCount}</div>
      <div class="stat-label">ë¶ˆëŸ‰</div>
    </div>
  `;

  // Issues list
  const issues = [];
  checkData.forEach(sec => {
    sec.items.forEach(item => {
      if (states[item.id] === 'warn' || states[item.id] === 'fail') {
        issues.push({ ...item, status: states[item.id], note: notes[item.id] });
      }
    });
  });

  const issuesEl = document.getElementById('issuesList');
  if (issues.length > 0) {
    issuesEl.innerHTML = `<div class="issues-title">âš  ì¡°ì¹˜ í•„ìš” í•­ëª© (${issues.length}ê±´)</div>` +
      issues.map(i => `
        <div class="issue-item ${i.status}">
          <strong>${i.name}</strong>${i.note ? '<br><span style="opacity:0.8">â†’ ' + i.note + '</span>' : ''}
        </div>
      `).join('');
  } else if (done === total) {
    issuesEl.innerHTML = `<div style="color:var(--accent2); font-size:13px; text-align:center; padding:12px 0">ğŸ‰ ëª¨ë“  í•­ëª© ì •ìƒ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤</div>`;
  } else {
    issuesEl.innerHTML = `<div style="color:var(--text3); font-size:12px; padding:8px 0">ë¯¸ì²´í¬ í•­ëª©: ${total - done}ê°œ</div>`;
  }

  document.getElementById('resultModal').classList.add('show');
}

function closeModal() {
  document.getElementById('resultModal').classList.remove('show');
}

function copyResult() {
  const inspector = document.getElementById('inspector').value || 'ë¯¸ì…ë ¥';
  const checkType = document.getElementById('checkType').value;
  const location = document.getElementById('location').value;
  const eventName = document.getElementById('eventName').value;
  const date = new Date().toLocaleDateString('ko-KR');

  const okCount = Object.values(states).filter(v => v === 'ok').length;
  const warnCount = Object.values(states).filter(v => v === 'warn').length;
  const failCount = Object.values(states).filter(v => v === 'fail').length;

  let text = `[ìŒí–¥ ì ê²€ ê²°ê³¼]\n`;
  text += `ì¼ì‹œ: ${date}\nì ê²€ ìœ í˜•: ${checkType}\nì ê²€ì: ${inspector}\nê³µê°„: ${location}`;
  if (eventName) text += `\ní–‰ì‚¬ëª…: ${eventName}`;
  text += `\n\n[ê²°ê³¼ ìš”ì•½]\nì •ìƒ: ${okCount}ê±´ / ì£¼ì˜: ${warnCount}ê±´ / ë¶ˆëŸ‰: ${failCount}ê±´\n`;

  const issues = [];
  checkData.forEach(sec => {
    sec.items.forEach(item => {
      if (states[item.id] === 'warn' || states[item.id] === 'fail') {
        issues.push(`- [${states[item.id] === 'warn' ? 'ì£¼ì˜' : 'ë¶ˆëŸ‰'}] ${item.name}${notes[item.id] ? ': ' + notes[item.id] : ''}`);
      }
    });
  });

  if (issues.length > 0) {
    text += `\n[ì¡°ì¹˜ í•„ìš” í•­ëª©]\n` + issues.join('\n');
  }

  navigator.clipboard.writeText(text).then(() => {
    alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\në‹¨í†¡ë°©, ë©”ì¼, ë³´ê³ ì„œì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.');
  });
}

// Set today's date
const now = new Date();
document.getElementById('dateDisplay').textContent =
  now.toLocaleDateString('ko-KR', { year: 'numeric', month: '2-digit', day: '2-digit' });
</script>
</body>
</html>
